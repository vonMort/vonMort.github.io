<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>WoT – Neutraler Fragebogen & Empfehlung</title>
    <style>
        :root{
            --bg:#0b0f14;--fg:#e7eef7;--muted:#9fb3c8;--card:#121822;--accent:#77c0ff;--ok:#6ad36a;--no:#ff6b6b;
        }
        *{box-sizing:border-box}
        html,body{height:100%;}
        body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;line-height:1.45;background:var(--bg);color:var(--fg)}
        .container{max-width:980px;margin:0 auto;padding:24px}
        header{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:16px}
        h1{font-size:clamp(20px,2.6vw,28px);margin:0}
        .card{background:var(--card);border:1px solid #1d2633;border-radius:14px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
        .grid{display:grid;gap:16px}
        .two{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
        .section-title{margin:10px 0 6px;font-size:18px;color:var(--accent)}
        .q{display:flex;align-items:center;justify-content:space-between;background:#0e1520;border:1px solid #233045;border-radius:12px;padding:10px 12px;margin:8px 0}
        .q label{display:block;font-size:15px;color:var(--fg);}
        .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
        button{appearance:none;border:1px solid #2b3a50;background:#132033;color:var(--fg);padding:9px 12px;border-radius:10px;font-weight:600;cursor:pointer}
        button.primary{background:linear-gradient(180deg,#1e4266,#14324f);border-color:#1b3d5a}
        button:disabled{opacity:.5;cursor:not-allowed}
        .pill{display:inline-flex;gap:6px;align-items:center;padding:4px 8px;border-radius:999px;border:1px solid #2b3a50;background:#0f1a28;color:var(--muted);font-size:12px}
        .recommendation{border-left:4px solid var(--accent);padding-left:12px;margin:10px 0}
        .rec-title{font-weight:700;font-size:16px}
        .bullets{margin:8px 0 0 16px}
        .bullets li{margin:4px 0}
        details{background:#0e1520;border:1px solid #1f2a3a;border-radius:10px;padding:8px 10px}
        summary{cursor:pointer;color:var(--muted)}
        footer{margin-top:20px;color:var(--muted);font-size:12px}
        .yesno{display:flex;gap:8px}
        .yesno input{display:none}
        .yesno label{padding:6px 10px;border:1px solid #2b3a50;border-radius:8px;cursor:pointer;background:#0f1a28}
        .yesno input:checked + label{border-color:#2f82ff;background:#11233a}
        .yesno input[value="yes"]:checked + label{outline:2px solid rgba(106,211,106,.35)}
        .yesno input[value="no"]:checked + label{outline:2px solid rgba(255,107,107,.35)}
        .tag{font-size:11px;color:#c7d8eb}
        .muted{color:var(--muted)}
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>World of Tanks – Neutraler Fragebogen & T10‑Empfehlung</h1>
        <div class="pill">Klassen berücksichtigt: Light · Medium · Heavy · TD · Arty</div>
    </header>

    <div class="card" id="intro">
        <p class="muted">Beantworte 40 neutrale Ja/Nein‑Fragen. Am Ende bekommst du 2–3 passende T10‑Vorschläge (auch klassenübergreifend), plus kurze Spielweise und einen Block „Warum nicht andere Klassen?“.</p>
        <div class="actions">
            <button class="primary" onclick="start()">Fragebogen starten</button>
            <button onclick="demoFill()">Beispielantworten füllen</button>
            <button onclick="resetAll()">Zurücksetzen</button>
        </div>
    </div>

    <div class="grid two" id="formWrap" style="display:none"></div>

    <div class="card" id="result" style="display:none;margin-top:16px"></div>

    <footer>
        <p>Single‑File App · Hoste sie auf GitHub Pages (einfach diese Datei als <code>index.html</code> in ein Repo legen).</p>
    </footer>
</div>

<script>
    // ----- Question bank (40) -----
    const SECTIONS = {
        'A. Spieltempo & Komfort': [
            'Fühlst du dich wohler, wenn Gefechte eher langsam anlaufen?',
            'Nervt es dich, wenn du in einem Gefecht kaum Zeit zum Überlegen hast?',
            'Magst du es, wenn dein Fahrzeug sofort an der Front sein kann?',
            'Stört es dich wenig, wenn du mehrere Minuten brauchst, um in Position zu kommen?',
            'Fühlst du dich sicherer, wenn du Zeit hast, bevor du Schaden austeilst?',
            'Macht es dir Spaß, wenn du im Gefecht permanent auf Achse bist?',
            'Stört es dich, wenn du dein Ziel lange einsehen musst, bevor du sicher treffen kannst?',
            'Macht es dir weniger aus, wenn du Gegner „ziehen lässt“ und lieber wartest?'
        ],
        'B. Risiko & Belohnung': [
            'Hast du Freude daran, in kurzer Zeit sehr viel Schaden rauszuhauen, auch wenn du danach lange nichts machen kannst?',
            'Ziehst du es vor, konstante Treffer über Zeit zu verteilen?',
            'Würdest du lieber sicher kleinere Treffer setzen als alles auf wenige große Treffer zu setzen?',
            'Stört es dich stark, wenn ein verfehlter Schuss dich lange nutzlos macht?',
            'Macht es dir Spaß, wenn eine einzige richtige Aktion über Sieg/Niederlage entscheidet?',
            'Ist es dir angenehmer, wenn mehrere kleine Aktionen zum Erfolg führen?',
            'Findest du es okay, wenn dein Erfolg stark vom Zufall abhängt?',
            'Bevorzugst du Systeme, die verlässlich immer gleich funktionieren?'
        ],
        'C. Präsenz & Teamrolle': [
            'Gefällt es dir, wenn du die Aufmerksamkeit vieler Gegner gleichzeitig auf dich ziehst?',
            'Stört es dich weniger, wenn du unscheinbar bist, solange du effektiv bleibst?',
            'Hast du lieber eine sichtbare, massive Rolle als eine subtile?',
            'Magst du es, wenn deine Anwesenheit bestimmte Routen auf der Karte quasi sperrt?',
            'Ist es dir wichtig, dass dein Team sofort merkt, wenn du da bist?',
            'Wäre es für dich in Ordnung, wenn dein Beitrag eher indirekt sichtbar wird (z. B. Spot, Assist)?',
            'Macht es dir Spaß, als „Schild“ für andere zu agieren, auch wenn du selbst weniger Schaden machst?',
            'Wärst du zufrieden, wenn du vor allem für eigenen Schaden spielst, auch wenn andere weniger profitieren?'
        ],
        'D. Toleranz für Schwächen': [
            'Macht es dir nichts aus, wenn dein Fahrzeug langsam ist, solange es stark ist?',
            'Würde dich schlechte Genauigkeit stark stören?',
            'Könntest du damit leben, dass dein Fahrzeug keine Panzerung hat, solange du andere Vorteile hast?',
            'Nervt es dich, wenn du oft Premium-Munition nutzen musst, um durchzukommen?',
            'Hättest du Spaß daran, eine große Silhouette zu fahren, auch wenn du ständig Fokusziel bist?',
            'Wäre es für dich schlimm, wenn du mit wenig HP kaum noch etwas beitragen kannst?',
            'Akzeptierst du es, wenn du in manchen Runden komplett nutzlos bist, solange du in anderen Carry sein kannst?',
            'Macht es dir mehr Spaß, wenn du Schwächen mit Skill kompensieren musst?'
        ],
        'E. Flexibilität & Anpassung': [
            'Gefällt es dir, wenn du Flanken wechseln kannst, auch mitten im Spiel?',
            'Wärst du zufrieden, wenn du fast immer denselben Spielplan fährst?',
            'Liebst du es, zu improvisieren, wenn sich das Gefecht chaotisch entwickelt?',
            'Fühlst du dich wohler, wenn dein Panzer in vielen Szenarien solide bleibt, statt in wenigen zu glänzen?',
            'Macht es dir Spaß, dich auf wechselnde Situationen einzustellen, auch wenn das schwer ist?',
            'Ist es dir wichtiger, in einer klaren Nische extrem stark zu sein, statt überall nur „ok“?',
            'Würdest du es bevorzugen, wenn dein Panzer auch Solo stark funktioniert, unabhängig vom Team?',
            'Wärst du zufrieden, wenn du ohne Team kaum etwas machen kannst, solange du im Team unersetzlich bist?'
        ]
    };

    // ----- Tank catalog (EU T10 pool subset with hybrid notions) -----
    const TANKS = [
        { id:'is7', name:'IS‑7', nation:'UdSSR', cls:'Heavy', role:'robuster Front‑Heavy, verzeihend und mobil genug',
            bullets:['Sidescrape & Trades mit 490 Alpha','Kann pushen, aber auch ankern','Guter Allrounder für Gunmarks'],
            tags:['armor_high','alpha_med','mobility_med','sustained','frontline','flex'] },
        { id:'vz55', name:'Vz. 55', nation:'Tschechien', cls:'Heavy', role:'flexibler Burst‑Heavy mit Clip/Einzelschuss',
            bullets:['2‑Schuss‑Burst, dann zurückziehen','Starker Turm, Hull‑Down','Gute Rotationsfähigkeit'],
            tags:['burst','mobility_med','turret_strong','flex'] },
        { id:'sconq', name:'Super Conqueror', nation:'UK', cls:'Heavy', role:'Hull‑Down‑Dauerfeuer mit starkem Gunhandling',
            bullets:['Turm zeigt, Wanne verstecken','Konstanter Output, wenig RNG','Ideal zum Methodisch‑Spielen'],
            tags:['sustained','turret_strong','mobility_low','control'] },
        { id:'e100', name:'E 100', nation:'Deutschland', cls:'Heavy', role:'Superschwerer Alphatrader',
            bullets:['750‑Alpha Trades erzwingen','Stadt/Korridor dominieren','Position früh wählen'],
            tags:['alpha_high','armor_high','mobility_low','frontline'] },
        { id:'maus', name:'Maus', nation:'Deutschland', cls:'Heavy', role:'Extrem‑Anker & Blocker',
            bullets:['Korridore sperren','HP als Ressource','Teamstütze, aber langsam'],
            tags:['superheavy','armor_high','mobility_verylow','frontline'] },
        { id:'obj277', name:'Obj. 277', nation:'UdSSR', cls:'Heavy', role:'schneller Alphatrader‑Heavy',
            bullets:['Aggressive Einstiege','490 Alpha, Mobilität','Fehler verzeiht er weniger'],
            tags:['alpha_med','mobility_high','burst_light','flex'] },
        { id:'is4', name:'IS‑4', nation:'UdSSR', cls:'Heavy', role:'klassischer Block‑Heavy',
            bullets:['Sidescrape und methodisch','Konstant traden','Zäh, aber nicht schnell'],
            tags:['armor_high','sustained','mobility_low','frontline'] },

        { id:'e50m', name:'E 50 M', nation:'Deutschland', cls:'Medium', role:'„Heavy‑Medium“ mit Präzision und Panzerung',
            bullets:['Angewinkelte Oberwanne bounct','Druck & Kontrolle auf Mid‑Range','Sehr verlässlich, wenig RNG'],
            tags:['med_heavy','sustained','mobility_med','armor_med','flex'] },
        { id:'obj140', name:'Obj. 140', nation:'UdSSR', cls:'Medium', role:'klassischer DPM‑Flanker',
            bullets:['Hohes Tempo & DPM','Flanken/Rotationen','Fehler werden bestraft'],
            tags:['mobility_high','sustained','glass_light','flex'] },
        { id:'prog65', name:'Progetto 65', nation:'Italien', cls:'Medium', role:'Autoreloader‑Allrounder',
            bullets:['Burst bei Gelegenheit','Einzelschuss für Konstanz','Sehr flexibel'],
            tags:['burst','sustained','mobility_med','flex'] },
        { id:'stb1', name:'STB‑1', nation:'Japan', cls:'Medium', role:'Hull‑Down‑DPM mit Hydropneumatik',
            bullets:['Turm zeigen, Wanne verstecken','Konstant Druck machen','Sehr map‑abhängig'],
            tags:['turret_strong','sustained','mobility_med','control'] },
        { id:'udes1516', name:'UDES 15/16', nation:'Schweden', cls:'Medium', role:'Hull‑Down‑Medium mit gutem Handling',
            bullets:['Hydropneumatik nutzen','Positionsspiel & Konstanz','Flankenwechsel möglich'],
            tags:['turret_strong','sustained','mobility_med','flex'] },
        { id:'leo1', name:'Leopard 1', nation:'Deutschland', cls:'Medium', role:'Langstrecken‑DPM & Map‑Kontrolle',
            bullets:['Snipen & Vision','Kaum Panzerung','Reposition nonstop'],
            tags:['mobility_high','sustained','glass','vision'] },
        { id:'obj430u', name:'Obj. 430U', nation:'UdSSR', cls:'Medium', role:'gepanzertes Alpha‑Medium',
            bullets:['Heavy‑ähnlich, aber mobiler','Trades mit Panzerung','Flanken bedrohen'],
            tags:['armor_med','alpha_med','mobility_med','flex'] },

        { id:'jge100', name:'Jagdpanzer E 100', nation:'Deutschland', cls:'TD', role:'Superschwerer TD‑Alphaklopper',
            bullets:['17‑cm‑Hammerschläge','Frontwinkel & Deckung','Langsam, aber furchteinflößend'],
            tags:['alpha_veryhigh','armor_high','mobility_low','frontline'] },
        { id:'strv103b', name:'Strv 103B', nation:'Schweden', cls:'TD', role:'Siege‑Sniper',
            bullets:['Stellungsspiel, Tarnung','Laser‑Genauigkeit im Siege','Stationär, teamabhängig'],
            tags:['sniper','sustained','stationary','vision'] },
        { id:'grille15', name:'Grille 15', nation:'Deutschland', cls:'TD', role:'Glaskanone auf Distanz',
            bullets:['Hohes Alpha / Genauigkeit','Extrem fragil','Positionsdisziplin nötig'],
            tags:['alpha_med','glass','sniper','mobility_med'] },
        { id:'obj268v4', name:'Obj. 268 Version 4', nation:'UdSSR', cls:'TD', role:'Assault‑TD mit Ramm‑Potenzial',
            bullets:['Panzerung + Tempo','Frontdruck & Durchbruch','Limited Gun Arc'],
            tags:['armor_high','mobility_med','frontline','alpha_med'] },

        { id:'cgc', name:'Conqueror GC', nation:'UK', cls:'Arty', role:'indirektes Feuer mit großer Splash‑Zone',
            bullets:['Zonen leerräumen','Teamabhängig & Geduld','Position ständig anpassen'],
            tags:['arty','indirect','stationary'] },
        { id:'obj261', name:'Obj. 261', nation:'UdSSR', cls:'Arty', role:'schnelle Arty mit flacher Flugbahn',
            bullets:['Schnell umlagern','Präziser als CGC','Trotzdem indirekt/teamabhängig'],
            tags:['arty','indirect'] },
        { id:'gwe100', name:'G.W. E 100', nation:'Deutschland', cls:'Arty', role:'hoher Splash, träge',
            bullets:['Splash & Betäubung','Sehr langsam','Rein indirekter Einfluss'],
            tags:['arty','indirect','stationary'] },
    ];

    // ----- Scoring rules -----
    // We derive preferences into a feature vector, then score tanks by tag overlap.
    function evaluate(answers){
        const pref = {
            mobility: 0,     // + prefers moving / quick to front; - prefers slow methodical
            sustained: 0,    // + prefers constant DPM; - prefers bursty windows
            burst: 0,        // + likes burst/clip; - dislikes
            presence: 0,     // + wants visible presence; - ok with indirect
            indirect: 0,     // + ok with indirect/arty
            armor: 0,        // + values armor/block; - ok with glass
            alpha: 0,        // + likes big hits, trades
            vision: 0,       // + enjoys vision/sniping
            flexibility: 0,  // + enjoys switching flanks/improv/solo
        };

        // Map each question to prefs (index from 1..40). yes=true/no=false
        const a = (i)=>answers[i-1]===true;

        // A: tempo & comfort (1-8)
        if(a(3)) pref.mobility+=2; // likes to be at front fast
        if(a(6)) pref.mobility+=2; // enjoys being on the move
        if(a(1)) pref.mobility-=1; // prefers slow start
        if(a(4)) pref.mobility-=2; // fine with long approach
        if(a(5)) pref.sustained+=1; // prefers prep before damage
        if(a(7)) pref.vision+=1; // needs aim/vision time
        if(a(8)) {pref.sustained+=1; pref.burst-=1;} // prefers waiting/pulls

        // B: risk/reward (9-16)
        if(a(9)) pref.burst+=2; else pref.sustained+=1;
        if(a(10)) pref.sustained+=2;
        if(a(11)) pref.sustained+=1; else pref.alpha+=1;
        if(a(12)) pref.burst-=1; // hates long downtime after miss
        if(a(13)) pref.alpha+=1; // likes decisive plays
        if(a(14)) pref.sustained+=1;
        if(a(15)) {pref.indirect+=1; pref.vision+=1;} else {pref.sustained+=1;}
        if(a(16)) pref.sustained+=1; else pref.burst+=1;

        // C: presence & team role (17-24)
        if(a(17)) pref.presence+=2; else pref.indirect+=1;
        if(a(18)) pref.indirect+=1; else pref.presence+=1;
        if(a(19)) pref.presence+=1;
        if(a(20)) pref.presence+=1;
        if(a(21)) pref.presence+=1; else pref.indirect+=1;
        if(a(22)) pref.indirect+=2;
        if(a(23)) {pref.armor+=1; pref.presence+=1;}
        if(a(24)) {pref.presence+=1;}

        // D: tolerance (25-32)
        if(a(25)) {pref.armor+=1; pref.mobility-=1;}
        if(!a(26)) pref.sustained+=1; // not bothered by poor accuracy → tolerates big guns
        if(!a(27)) pref.armor+=1; else pref.mobility+=1; // ok with no armor → mobility play
        if(!a(28)) pref.alpha+=1; // ok with prem use → fine with trades
        if(a(29)) {pref.presence+=1; pref.armor+=1;}
        if(a(30)) {pref.sustained+=1;} else {pref.burst+=1;}
        if(a(31)) {pref.alpha+=1; pref.burst+=1;} // ok with swingy
        if(a(32)) {pref.flexibility+=1;} else {pref.sustained+=1;}

        // E: flexibility (33-40)
        if(a(33)) pref.flexibility+=2; else pref.sustained+=1;
        if(a(34)) pref.sustained+=1; else pref.flexibility+=1;
        if(a(35)) pref.flexibility+=2; else pref.sustained+=1;
        if(a(36)) pref.sustained+=1;
        if(a(37)) pref.flexibility+=1;
        if(a(38)) pref.flexibility+=0; else pref.sustained+=1; // niche vs allround
        if(a(39)) pref.flexibility+=2; else pref.indirect+=1;
        if(a(40)) pref.indirect+=2; else pref.presence+=1;

        // Score tanks by tag alignment
        function scoreTank(t){
            let s=0; const tags=t.tags||[];
            if(tags.includes('mobility_high')) s+=pref.mobility>1?2:0;
            if(tags.includes('mobility_med')) s+=pref.mobility>=0?1:0;
            if(tags.includes('mobility_low')||tags.includes('mobility_verylow')) s+=(pref.mobility<0?2:0);

            if(tags.includes('sustained')) s+=pref.sustained;
            if(tags.includes('burst')||tags.includes('burst_light')) s+=pref.burst;

            if(tags.includes('frontline')) s+=pref.presence;
            if(tags.includes('vision')||tags.includes('sniper')) s+=pref.vision;

            if(tags.includes('armor_high')||tags.includes('superheavy')||tags.includes('turret_strong')) s+=pref.armor;
            if(tags.includes('glass')||tags.includes('glass_light')) s+= (pref.armor<0?2:0);

            if(tags.includes('alpha_high')||tags.includes('alpha_veryhigh')||tags.includes('alpha_med')) s+=pref.alpha;

            if(tags.includes('flex')||tags.includes('med_heavy')) s+=pref.flexibility;

            if(tags.includes('arty')||tags.includes('indirect')||tags.includes('stationary')) s+=pref.indirect;

            return s;
        }

        const scored = TANKS.map(t=>({t,score:scoreTank(t)})).sort((a,b)=>b.score-a.score);
        return {pref,scored};
    }

    // ----- UI rendering -----
    function start(){
        const wrap=document.getElementById('formWrap');
        wrap.innerHTML='';
        wrap.style.display='grid';

        let idx=0; const form=document.createElement('form');
        for(const [section,qs] of Object.entries(SECTIONS)){
            const sec=document.createElement('div');
            sec.className='card';
            const h=document.createElement('div');h.className='section-title';h.textContent=section;sec.appendChild(h);
            qs.forEach(q=>{
                idx++; const row=document.createElement('div');row.className='q';
                const lab=document.createElement('label');lab.setAttribute('for','q'+idx);lab.textContent=q;row.appendChild(lab);
                const yn=document.createElement('div');yn.className='yesno';
                yn.innerHTML=`
          <input type="radio" name="q${idx}" id="q${idx}y" value="yes"><label for="q${idx}y">Ja</label>
          <input type="radio" name="q${idx}" id="q${idx}n" value="no"><label for="q${idx}n">Nein</label>
        `;
                row.appendChild(yn);
                sec.appendChild(row);
            });
            form.appendChild(sec);
        }

        const actions=document.createElement('div');actions.className='actions';
        const btn=document.createElement('button');btn.type='button';btn.className='primary';btn.textContent='Auswerten';btn.onclick=submit;
        actions.appendChild(btn);
        const reset=document.createElement('button');reset.type='button';reset.textContent='Zurücksetzen';reset.onclick=resetAll;actions.appendChild(reset);
        form.appendChild(actions);

        wrap.appendChild(form);
        document.getElementById('intro').style.display='none';
    }

    function submit(){
        // collect 40 answers
        const answers=[];
        for(let i=1;i<=40;i++){
            const y=document.getElementById('q'+i+'y');
            const n=document.getElementById('q'+i+'n');
            if(!y||!n){alert('Interner Fehler bei Frage '+i);return}
            if(!y.checked && !n.checked){alert('Bitte alle Fragen beantworten. Fehlend: '+i);return}
            answers.push(!!y.checked);
        }

        const {pref,scored}=evaluate(answers);
        // choose top 3 distinct by class preference (allow hybrids)
        const top = scored.slice(0,6); // consider top 6 then reduce
        const picked=[];
        for(const s of top){
            if(picked.length>=3) break;
            // avoid near-duplicates by same id; allow cross-class
            if(!picked.find(p=>p.t.id===s.t.id)) picked.push(s);
        }

        renderResult(picked.map(x=>x.t), pref, scored);
    }

    function renderResult(tanks, pref, scored){
        const box=document.getElementById('result');
        box.style.display='block';
        box.innerHTML='';

        const h=document.createElement('h2');h.textContent='Deine passenden T10‑Panzer';box.appendChild(h);

        tanks.slice(0,3).forEach(t=>{
            const div=document.createElement('div');div.className='recommendation';
            div.innerHTML=`
        <div class="rec-title">${t.name} (${t.nation}, ${t.cls})</div>
        <div class="muted">Aufgabe: ${t.role}</div>
        <ul class="bullets">${t.bullets.map(b=>`<li>${b}</li>`).join('')}</ul>
        <div class="tag muted">Tags: ${t.tags.join(', ')}</div>
      `;
            box.appendChild(div);
        });

        // Why not other classes?
        const other = document.createElement('div'); other.style.marginTop='14px';
        const sum=document.createElement('details');
        sum.innerHTML=`<summary>Warum nicht andere Klassen?</summary>`;
        const reasons=[];
        if(pref.indirect < pref.presence){
            reasons.push('<b>Artillerie</b>: zu indirekt/teamabhängig im Vergleich zu deinem Wunsch nach sichtbarer Präsenz.');
        } else {
            reasons.push('<b>Artillerie</b>: möglich, da du indirekte Wirkung akzeptierst – aber die Top‑Matches liegen woanders.');
        }
        if(pref.mobility > 0 && pref.flexibility > 0){
            reasons.push('<b>Superschwere (Maus/E 100/Type 71)</b>: zu träge für deine Mobilitäts‑/Flexpräferenz.');
        } else if(pref.armor>0){
            reasons.push('<b>Superschwere</b>: teilweise passend wegen Panzerung, aber andere Optionen bieten mehr Output.');
        }
        if(pref.vision>0){
            reasons.push('<b>Stationäre TDs (Strv 103B/Grille 15)</b>: starke Fernwirkung, aber zu positionsgebunden für deinen Flow.');
        }
        // Lights
        if(pref.presence>pref.indirect){
            reasons.push('<b>Lights</b>: sehr mobil, aber zu indirekter Impact (Spot/Assist) vs. dein Wunsch nach direktem Schaden.');
        } else {
            reasons.push('<b>Lights</b>: denkbar, aber andere Klassen treffen deine Präferenz besser.');
        }

        sum.insertAdjacentHTML('beforeend', `<div style="margin-top:8px">${reasons.map(r=>`<div>• ${r}</div>`).join('')}</div>`);
        other.appendChild(sum);

        // Show top scoring diagnostics (optional)
        const dbg=document.createElement('details');
        dbg.innerHTML='<summary>Diagnose (Top‑Scores)</summary>';
        const list = scored.slice(0,8).map(s=>`<div>• ${s.t.name} – Score ${s.score}</div>`).join('');
        dbg.insertAdjacentHTML('beforeend', `<div class="muted" style="margin-top:6px">${list}</div>`);

        box.appendChild(other);
        box.appendChild(dbg);
        window.scrollTo({top:box.offsetTop-10,behavior:'smooth'});
    }

    function resetAll(){
        document.getElementById('intro').style.display='block';
        document.getElementById('formWrap').style.display='none';
        document.getElementById('formWrap').innerHTML='';
        document.getElementById('result').style.display='none';
        document.getElementById('result').innerHTML='';
    }

    // Fill demo answers (pattern close to aggressive flexible player)
    function demoFill(){
        start();
        const yes=[3,6,9,10,13,16,17,19,20,21,23,24,27,29,31,33,35,36,37,39,40];
        for(let i=1;i<=40;i++){
            const y=document.getElementById('q'+i+'y');
            const n=document.getElementById('q'+i+'n');
            if(yes.includes(i)) y.checked=true; else n.checked=true;
        }
    }
</script>
</body>
</html>
