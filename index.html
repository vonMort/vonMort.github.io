<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>WoT – Neutral Questionnaire & Recommendation</title>
    <style>
        :root{
            --bg:#0b0f14;--fg:#e7eef7;--muted:#9fb3c8;--card:#121822;--accent:#77c0ff;--ok:#6ad36a;--no:#ff6b6b;
        }
        *{box-sizing:border-box}
        html,body{height:100%;}
        body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;line-height:1.45;background:var(--bg);color:var(--fg)}
        .container{max-width:980px;margin:0 auto;padding:24px}
        header{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:16px}
        h1{font-size:clamp(20px,2.6vw,28px);margin:0}
        .card{background:var(--card);border:1px solid #1d2633;border-radius:14px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
        .grid{display:grid;gap:16px}
        .two{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
        .section-title{margin:10px 0 6px;font-size:18px;color:var(--accent)}
        .q{display:flex;align-items:center;justify-content:space-between;background:#0e1520;border:1px solid #233045;border-radius:12px;padding:10px 12px;margin:8px 0}
        .q label{display:block;font-size:15px;color:var(--fg);}
        .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
        button{appearance:none;border:1px solid #2b3a50;background:#132033;color:var(--fg);padding:9px 12px;border-radius:10px;font-weight:600;cursor:pointer}
        button.primary{background:linear-gradient(180deg,#1e4266,#14324f);border-color:#1b3d5a}
        button:disabled{opacity:.5;cursor:not-allowed}
        .pill{display:inline-flex;gap:6px;align-items:center;padding:4px 8px;border-radius:999px;border:1px solid #2b3a50;background:#0f1a28;color:var(--muted);font-size:12px}
        .recommendation{border-left:4px solid var(--accent);padding-left:12px;margin:10px 0}
        .rec-title{font-weight:700;font-size:16px}
        .bullets{margin:8px 0 0 16px}
        .bullets li{margin:4px 0}
        details{background:#0e1520;border:1px solid #1f2a3a;border-radius:10px;padding:8px 10px}
        summary{cursor:pointer;color:var(--muted)}
        footer{margin-top:20px;color:var(--muted);font-size:12px}
        .yesno{display:flex;gap:8px}
        .yesno input{display:none}
        .yesno label{padding:6px 10px;border:1px solid #2b3a50;border-radius:8px;cursor:pointer;background:#0f1a28}
        .yesno input:checked + label{border-color:#2f82ff;background:#11233a}
        .yesno input[value="yes"]:checked + label{outline:2px solid rgba(106,211,106,.35)}
        .yesno input[value="no"]:checked + label{outline:2px solid rgba(255,107,107,.35)}
        .tag{font-size:11px;color:#c7d8eb}
        .muted{color:var(--muted)}
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>World of Tanks – Neutral Questionnaire & Tier 10 Recommendation</h1>
        <div class="pill">Classes considered: Light · Medium · Heavy · TD · SPG</div>
    </header>

    <div class="card" id="intro">
        <p class="muted">Answer 40 neutral yes/no questions. At the end you'll receive 2–3 suitable tier 10 suggestions (across classes), brief playstyle notes and a section “Why not other classes?”.</p>
        <div class="actions">
            <button class="primary" onclick="start()">Start questionnaire</button>
            <button onclick="demoFill()">Load sample answers</button>
            <button onclick="resetAll()">Reset</button>
        </div>
    </div>

    <div class="grid two" id="formWrap" style="display:none"></div>

    <div class="card" id="result" style="display:none;margin-top:16px"></div>

    <footer>
        <p>Single‑file app.</p>
    </footer>
</div>

<script>
    const SECTIONS = {
        'A. Pace & Comfort': [
            'Do you feel more comfortable when battles start slowly?',
            'Does it bother you when a battle gives you almost no time to think?',
            'Do you enjoy when your vehicle can get to the front immediately?',
            'Is it fine with you if it takes several minutes to reach position?',
            'Do you feel safer when you have time before dealing damage?',
            'Do you enjoy being constantly on the move in battle?',
            'Does it annoy you to aim at a target for a long time before you can hit reliably?',
            'Are you fine with letting enemies come to you and waiting instead of pushing?'
        ],
        'B. Risk & Reward': [
            'Do you enjoy dumping a lot of damage quickly even if you cannot do anything for a while afterward?',
            'Do you prefer to deal steady damage over time?',
            'Would you rather land smaller reliable hits than gamble on a few big ones?',
            'Does it really bother you when a missed shot leaves you useless for a long time?',
            'Do you enjoy when a single correct play can decide victory or defeat?',
            'Do you prefer when several small actions lead to success?',
            'Are you fine with your success depending heavily on luck?',
            'Do you prefer systems that reliably behave the same way each time?'
        ],
        'C. Presence & Team Role': [
            'Do you like drawing the attention of many enemies at once?',
            'Is it fine if you are unnoticed as long as you stay effective?',
            'Do you prefer a visible, heavy role over a subtle one?',
            'Do you like when your presence basically blocks certain routes on the map?',
            'Is it important to you that your team immediately notices when you are present?',
            'Is it okay if your contribution is mostly indirect (e.g., spotting, assisting)?',
            'Do you enjoy acting as a shield for others even if you deal less damage yourself?',
            'Would you be satisfied playing mainly for your own damage even if others benefit less?'
        ],
        'D. Tolerance for Weaknesses': [
            'Are you okay with your vehicle being slow as long as it is strong?',
            'Would poor accuracy bother you a lot?',
            'Could you live with having no armor as long as you have other advantages?',
            'Does it annoy you when you often need premium ammo to penetrate?',
            'Would you enjoy driving a large vehicle even if you are always a focus target?',
            'Would it be a problem for you if you can hardly contribute once you are low on HP?',
            'Do you accept being useless in some games as long as you can carry others?',
            'Do you enjoy compensating for weaknesses with skill?'
        ],
        'E. Flexibility & Adaptation': [
            'Do you like being able to switch flanks even mid-battle?',
            'Would you be content running almost the same game plan every time?',
            'Do you love improvising when the battle gets chaotic?',
            'Do you prefer a tank that stays decent in many scenarios rather than excels in only a few?',
            'Do you enjoy adapting to changing situations even if it is hard?',
            'Is it more important to you to be extremely strong in a clear niche rather than just ok everywhere?',
            'Would you prefer a tank that works well solo regardless of team?',
            'Would you be satisfied doing little alone if you are indispensable with a team?'
        ]
    };
    const TANKS = [
        { id:'is7', name:'IS‑7', nation:'USSR', cls:'Heavy', role:'durable frontline heavy, forgiving and mobile enough',
            bullets:['Sidescrape and trade with 490 alpha','Can push or hold positions','Solid all-rounder for gun marks'],
            tags:['armor_high','alpha_med','mobility_med','sustained','frontline','flex'] },
        { id:'vz55', name:'Vz. 55', nation:'Czech Republic', cls:'Heavy', role:'flexible burst heavy with clip or single shot',
            bullets:['2-shot burst then fall back','Strong turret, hull-down','Good at relocating'],
            tags:['burst','mobility_med','turret_strong','flex'] },
        { id:'sconq', name:'Super Conqueror', nation:'UK', cls:'Heavy', role:'hull-down sustained fire with strong gun handling',
            bullets:['Show turret, hide hull','Consistent output, little RNG','Ideal for methodical play'],
            tags:['sustained','turret_strong','mobility_low','control'] },
        { id:'e100', name:'E 100', nation:'Germany', cls:'Heavy', role:'super-heavy alpha trader',
            bullets:['Force 750-alpha trades','Dominate city/corridor','Pick your position early'],
            tags:['alpha_high','armor_high','mobility_low','frontline'] },
        { id:'maus', name:'Maus', nation:'Germany', cls:'Heavy', role:'extreme anchor and blocker',
            bullets:['Block corridors','Use HP as a resource','Supports team but slow'],
            tags:['superheavy','armor_high','mobility_verylow','frontline'] },
        { id:'obj277', name:'Obj. 277', nation:'USSR', cls:'Heavy', role:'fast alpha-trading heavy',
            bullets:['Aggressive openings','490 alpha with mobility','Less forgiving of mistakes'],
            tags:['alpha_med','mobility_high','burst_light','flex'] },
        { id:'is4', name:'IS‑4', nation:'USSR', cls:'Heavy', role:'classic armor-blocking heavy',
            bullets:['Sidescrape and play methodically','Trade consistently','Tough but slow'],
            tags:['armor_high','sustained','mobility_low','frontline'] },

        { id:'e50m', name:'E 50 M', nation:'Germany', cls:'Medium', role:'"Heavy-medium" with precision and armor',
            bullets:['Angled upper plate bounces shots','Pressure and control at mid-range','Very reliable, little RNG'],
            tags:['med_heavy','sustained','mobility_med','armor_med','flex'] },
        { id:'obj140', name:'Obj. 140', nation:'USSR', cls:'Medium', role:'classic DPM flanker',
            bullets:['High speed and DPM','Flanking and rotations','Mistakes are punished'],
            tags:['mobility_high','sustained','glass_light','flex'] },
        { id:'prog65', name:'Progetto 65', nation:'Italy', cls:'Medium', role:'autoreloader all-rounder',
            bullets:['Burst when opportunity arises','Single shot for consistency','Highly flexible'],
            tags:['burst','sustained','mobility_med','flex'] },
        { id:'stb1', name:'STB‑1', nation:'Japan', cls:'Medium', role:'hull-down DPM with hydropneumatics',
            bullets:['Show turret, hide hull','Apply constant pressure','Very map-dependent'],
            tags:['turret_strong','sustained','mobility_med','control'] },
        { id:'udes1516', name:'UDES 15/16', nation:'Sweden', cls:'Medium', role:'hull-down medium with good handling',
            bullets:['Use hydropneumatics','Positional play and consistency','Can switch flanks'],
            tags:['turret_strong','sustained','mobility_med','flex'] },
        { id:'leo1', name:'Leopard 1', nation:'Germany', cls:'Medium', role:'long-range DPM and map control',
            bullets:['Sniping and vision','Almost no armor','Constant repositioning'],
            tags:['mobility_high','sustained','glass','vision'] },
        { id:'obj430u', name:'Obj. 430U', nation:'USSR', cls:'Medium', role:'armored alpha medium',
            bullets:['Heavy-like but more mobile','Trades using armor','Threaten flanks'],
            tags:['armor_med','alpha_med','mobility_med','flex'] },

        { id:'jge100', name:'Jagdpanzer E 100', nation:'Germany', cls:'TD', role:'super-heavy TD alpha striker',
            bullets:['17 cm hammer blows','Angle front and use cover','Slow but intimidating'],
            tags:['alpha_veryhigh','armor_high','mobility_low','frontline'] },
        { id:'strv103b', name:'Strv 103B', nation:'Sweden', cls:'TD', role:'siege sniper',
            bullets:['Positional play and camouflage','Laser accuracy in siege mode','Stationary and team-dependent'],
            tags:['sniper','sustained','stationary','vision'] },
        { id:'grille15', name:'Grille 15', nation:'Germany', cls:'TD', role:'glass cannon at range',
            bullets:['High alpha and accuracy','Extremely fragile','Needs positional discipline'],
            tags:['alpha_med','glass','sniper','mobility_med'] },
        { id:'obj268v4', name:'Obj. 268 Version 4', nation:'USSR', cls:'TD', role:'assault TD with ramming potential',
            bullets:['Armor and speed','Front pressure and breakthroughs','Limited gun arc'],
            tags:['armor_high','mobility_med','frontline','alpha_med'] },

        { id:'cgc', name:'Conqueror GC', nation:'UK', cls:'Arty', role:'indirect fire with large splash zone',
            bullets:['Clear zones','Team-dependent and requires patience','Constantly adjust position'],
            tags:['arty','indirect','stationary'] },
        { id:'obj261', name:'Obj. 261', nation:'USSR', cls:'Arty', role:'fast SPG with flat trajectory',
            bullets:['Relocate quickly','More precise than CGC','Still indirect and team-dependent'],
            tags:['arty','indirect'] },
        { id:'gwe100', name:'G.W. E 100', nation:'Germany', cls:'Arty', role:'high splash, sluggish',
            bullets:['Splash and stun','Very slow','Purely indirect impact'],
            tags:['arty','indirect','stationary'] },
    ];

    function evaluate(answers){
        const pref = {
            mobility: 0,
            sustained: 0,
            burst: 0,
            presence: 0,
            indirect: 0,
            armor: 0,
            alpha: 0,
            vision: 0,
            flexibility: 0,
        };
        const a = (i)=>answers[i-1]===true;
        if(a(3)) pref.mobility+=2;
        if(a(6)) pref.mobility+=2;
        if(a(1)) pref.mobility-=1;
        if(a(4)) pref.mobility-=2;
        if(a(5)) pref.sustained+=1;
        if(a(7)) pref.vision+=1;
        if(a(8)) {pref.sustained+=1; pref.burst-=1;}

        if(a(9)) pref.burst+=2; else pref.sustained+=1;
        if(a(10)) pref.sustained+=2;
        if(a(11)) pref.sustained+=1; else pref.alpha+=1;
        if(a(12)) pref.burst-=1;
        if(a(13)) pref.alpha+=1;
        if(a(14)) pref.sustained+=1;
        if(a(15)) {pref.indirect+=1; pref.vision+=1;} else {pref.sustained+=1;}
        if(a(16)) pref.sustained+=1; else pref.burst+=1;
        if(a(17)) pref.presence+=2; else pref.indirect+=1;
        if(a(18)) pref.indirect+=1; else pref.presence+=1;
        if(a(19)) pref.presence+=1;
        if(a(20)) pref.presence+=1;
        if(a(21)) pref.presence+=1; else pref.indirect+=1;
        if(a(22)) pref.indirect+=2;
        if(a(23)) {pref.armor+=1; pref.presence+=1;}
        if(a(24)) {pref.presence+=1;}
        if(a(25)) {pref.armor+=1; pref.mobility-=1;}
        if(!a(26)) pref.sustained+=1;
        if(!a(27)) pref.armor+=1; else pref.mobility+=1;
        if(!a(28)) pref.alpha+=1;
        if(a(29)) {pref.presence+=1; pref.armor+=1;}
        if(a(30)) {pref.sustained+=1;} else {pref.burst+=1;}
        if(a(31)) {pref.alpha+=1; pref.burst+=1;}
        if(a(32)) {pref.flexibility+=1;} else {pref.sustained+=1;}
        if(a(33)) pref.flexibility+=2; else pref.sustained+=1;
        if(a(34)) pref.sustained+=1; else pref.flexibility+=1;
        if(a(35)) pref.flexibility+=2; else pref.sustained+=1;
        if(a(36)) pref.sustained+=1;
        if(a(37)) pref.flexibility+=1;
        if(a(38)) pref.flexibility+=0; else pref.sustained+=1;
        if(a(39)) pref.flexibility+=2; else pref.indirect+=1;
        if(a(40)) pref.indirect+=2; else pref.presence+=1;
        function scoreTank(t){
            let s=0; const tags=t.tags||[];
            if(tags.includes('mobility_high')) s+=pref.mobility>1?2:0;
            if(tags.includes('mobility_med')) s+=pref.mobility>=0?1:0;
            if(tags.includes('mobility_low')||tags.includes('mobility_verylow')) s+=(pref.mobility<0?2:0);

            if(tags.includes('sustained')) s+=pref.sustained;
            if(tags.includes('burst')||tags.includes('burst_light')) s+=pref.burst;

            if(tags.includes('frontline')) s+=pref.presence;
            if(tags.includes('vision')||tags.includes('sniper')) s+=pref.vision;

            if(tags.includes('armor_high')||tags.includes('superheavy')||tags.includes('turret_strong')) s+=pref.armor;
            if(tags.includes('glass')||tags.includes('glass_light')) s+= (pref.armor<0?2:0);

            if(tags.includes('alpha_high')||tags.includes('alpha_veryhigh')||tags.includes('alpha_med')) s+=pref.alpha;

            if(tags.includes('flex')||tags.includes('med_heavy')) s+=pref.flexibility;

            if(tags.includes('arty')||tags.includes('indirect')||tags.includes('stationary')) s+=pref.indirect;

            return s;
        }

        const scored = TANKS.map(t=>({t,score:scoreTank(t)})).sort((a,b)=>b.score-a.score);
        return {pref,scored};
    }

    function start(){
        const wrap=document.getElementById('formWrap');
        wrap.innerHTML='';
        wrap.style.display='grid';

        let idx=0; const form=document.createElement('form');
        for(const [section,qs] of Object.entries(SECTIONS)){
            const sec=document.createElement('div');
            sec.className='card';
            const h=document.createElement('div');h.className='section-title';h.textContent=section;sec.appendChild(h);
            qs.forEach(q=>{
                idx++; const row=document.createElement('div');row.className='q';
                const lab=document.createElement('label');lab.setAttribute('for','q'+idx);lab.textContent=q;row.appendChild(lab);
                const yn=document.createElement('div');yn.className='yesno';
                yn.innerHTML=`
          <input type="radio" name="q${idx}" id="q${idx}y" value="yes"><label for="q${idx}y">Yes</label>
          <input type="radio" name="q${idx}" id="q${idx}n" value="no"><label for="q${idx}n">No</label>
        `;
                row.appendChild(yn);
                sec.appendChild(row);
            });
            form.appendChild(sec);
        }

        const actions=document.createElement('div');actions.className='actions';
        const btn=document.createElement('button');btn.type='button';btn.className='primary';btn.textContent='Show results';btn.onclick=submit;
        actions.appendChild(btn);
        const reset=document.createElement('button');reset.type='button';reset.textContent='Reset';reset.onclick=resetAll;actions.appendChild(reset);
        form.appendChild(actions);

        wrap.appendChild(form);
        document.getElementById('intro').style.display='none';
    }

    function submit(){
        const answers=[];
        for(let i=1;i<=40;i++){
            const y=document.getElementById('q'+i+'y');
            const n=document.getElementById('q'+i+'n');
            if(!y||!n){alert('Internal error at question '+i);return}
            if(!y.checked && !n.checked){alert('Please answer all questions. Missing: '+i);return}
            answers.push(!!y.checked);
        }

        const {pref,scored}=evaluate(answers);
        const top = scored.slice(0,6);
        const picked=[];
        for(const s of top){
            if(picked.length>=3) break;
            if(!picked.find(p=>p.t.id===s.t.id)) picked.push(s);
        }

        renderResult(picked.map(x=>x.t), pref, scored);
    }

    function renderResult(tanks, pref, scored){
        const box=document.getElementById('result');
        box.style.display='block';
        box.innerHTML='';

        const h=document.createElement('h2');h.textContent='Your matching Tier 10 tanks';box.appendChild(h);

        tanks.slice(0,3).forEach(t=>{
            const div=document.createElement('div');div.className='recommendation';
            div.innerHTML=`
        <div class="rec-title">${t.name} (${t.nation}, ${t.cls})</div>
        <div class="muted">Role: ${t.role}</div>
        <ul class="bullets">${t.bullets.map(b=>`<li>${b}</li>`).join('')}</ul>
        <div class="tag muted">Tags: ${t.tags.join(', ')}</div>
      `;
            box.appendChild(div);
        });

        const other = document.createElement('div'); other.style.marginTop='14px';
        const sum=document.createElement('details');
        sum.innerHTML=`<summary>Why not other classes?</summary>`;
        const reasons=[];
        if(pref.indirect < pref.presence){
            reasons.push('<b>Artillery</b>: too indirect/team-dependent compared with your desire for visible presence.');
        } else {
            reasons.push('<b>Artillery</b>: possible since you accept indirect impact, but the top matches lie elsewhere.');
        }
        if(pref.mobility > 0 && pref.flexibility > 0){
            reasons.push('<b>Super-heavies (Maus/E 100/Type 71)</b>: too sluggish for your mobility/flex preference.');
        } else if(pref.armor>0){
            reasons.push('<b>Super-heavies</b>: partly suitable due to armor, but other options offer more output.');
        }
        if(pref.vision>0){
            reasons.push('<b>Stationary TDs (Strv 103B/Grille 15)</b>: strong long-range impact but too position-bound for your playstyle.');
        }
        if(pref.presence>pref.indirect){
            reasons.push('<b>Lights</b>: very mobile but too indirect (spot/assist) compared with your desire for direct damage.');
        } else {
            reasons.push('<b>Lights</b>: possible, but other classes fit your preferences better.');
        }

        sum.insertAdjacentHTML('beforeend', `<div style="margin-top:8px">${reasons.map(r=>`<div>• ${r}</div>`).join('')}</div>`);
        other.appendChild(sum);

        const dbg=document.createElement('details');
        dbg.innerHTML='<summary>Diagnostics (top scores)</summary>';
        const list = scored.slice(0,8).map(s=>`<div>• ${s.t.name} – Score ${s.score}</div>`).join('');
        dbg.insertAdjacentHTML('beforeend', `<div class="muted" style="margin-top:6px">${list}</div>`);

        box.appendChild(other);
        box.appendChild(dbg);
        window.scrollTo({top:box.offsetTop-10,behavior:'smooth'});
    }

    function resetAll(){
        document.getElementById('intro').style.display='block';
        document.getElementById('formWrap').style.display='none';
        document.getElementById('formWrap').innerHTML='';
        document.getElementById('result').style.display='none';
        document.getElementById('result').innerHTML='';
    }

    function demoFill(){
        start();
        const yes=[3,6,9,10,13,16,17,19,20,21,23,24,27,29,31,33,35,36,37,39,40];
        for(let i=1;i<=40;i++){
            const y=document.getElementById('q'+i+'y');
            const n=document.getElementById('q'+i+'n');
            if(yes.includes(i)) y.checked=true; else n.checked=true;
        }
    }
</script>
</body>
</html>
